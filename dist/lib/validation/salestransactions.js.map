{"version":3,"sources":["../../../lib/validation/salestransactions.js"],"names":["validateSalesTransactions","data","salesData","JSON","parse","result","finalObject","dateRegex","timeRegex","request","map","row","Promise","resolve","reject","transaction_id","errorID","errorField","errorReason","line_item_id","customer_id","sales_date","match","sales_time","product_id","product_quantity","isNaN","product_unit_price","sales_value","sales_value_wo_vat","rebate","rebate_wo_vat","sales_currency","payment_method","supplier_id","purchase_price","purchase_price_wo_vat","purchase_currency","piece_good","organisation_id","department_id","salesperson_id","campaign_id","cancel_id","delivery_date","delivery_time","order_date","order_time","invoice_date","invoice_time","register_id","rebate_code_id","custom_field_1","custom_field_2","custom_field_3","custom_field_4","custom_field_5","delivery_customer_id","source_system","push","all","module","exports"],"mappings":"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","file":"salestransactions.js","sourcesContent":["/* eslint-disable valid-jsdoc */\n'use strict';\n\n/**\n * @author Dave Grix\n * @param data string\n * @return array\n */\n\nconst validateSalesTransactions = async(data) => {\n\n  const salesData = JSON.parse(data);\n  let result = {};\n  let finalObject = [];\n\n\n  const dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\n  const timeRegex = /^\\d{2}:\\d{2}:\\d{2}$/;\n\n  let request = salesData.map((row) => {\n    return new Promise((resolve, reject) => {\n\n      /**\n       * @param row object\n       * @param row.transaction_id string required\n       * @param row.line_item_id string required\n       * @param row.customer_id string\n       * @param row.sales_date string required (yyyy-mm-dd)\n       * @param row.sales_time string required (HH:mm:ss)\n       * @param row.product_id string required\n       * @param row.product_quantity number required\n       * @param row.product_unit_price number required\n       * @param row.sales_value number required\n       * @param row.sales_value_wo_vat number\n       * @param row.rebate number\n       * @param row.rebate_wo_vat number\n       * @param row.sales_currency string\n       * @param row.payment_method string\n       * @param row.supplier_id string\n       * @param row.purchase_price number\n       * @param row.purchase_price_wo_vat number\n       * @param row.purchase_currency string\n       * @param row.piece_good boolean\n       * @param row.organisation_id string\n       * @param row.department_id string\n       * @param row.salesperson_id string\n       * @param row.campaign_id string\n       * @param row.cancel_id string\n       * @param row.delivery_date string (yyyy-mm-dd)\n       * @param row.delivery_time string (HH:mm:ss)\n       * @param row.order_date string (yyyy-mm-dd)\n       * @param row.order_time string (HH:mm:ss)\n       * @param row.invoice_date string (yyyy-mm-dd)\n       * @param row.invoice_time string (HH:mm:ss)\n       * @param row.register_id string\n       * @param row.rebate_code_id string\n       * @param row.custom_field_1 string\n       * @param row.custom_field_2 string\n       * @param row.custom_field_3 string\n       * @param row.custom_field_4 string\n       * @param row.custom_field_5 string\n       * @param row.delivery_customer_id string\n       * @param row.source_system string\n\n       */\n\n      if (!row.transaction_id) {\n        result.errorID = row.transaction_id;\n        result.errorField = 'transaction_id';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n\n        if (typeof row.transaction_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'transaction_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      }\n\n\n      if (!row.line_item_id) {\n        result.errorID = '';\n        result.errorField = 'line_item_id';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n\n        if (typeof row.line_item_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'line_item_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      }\n\n      if (row.customer_id) {\n        if (typeof row.customer_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'customer_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.customer_id = '';\n      }\n\n      if (!row.sales_date) {\n        result.errorID = row.transaction_id;\n        result.errorField = 'sales_date';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n        if (typeof row.sales_date !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'sales_date';\n          result.errorReason = 'Not a String';\n          reject(result);\n        } else if (!row.sales_date.match(dateRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'sales_date';\n          result.errorReason = 'Not in correct format of YYYY-mm-dd';\n          reject(result);\n        }\n      }\n\n      if (!row.sales_time) {\n        result.errorID = row.transaction_id;\n        result.errorField = 'sales_time';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n        if (typeof row.sales_time !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'sales_time';\n          result.errorReason = 'Not a String';\n          reject(result);\n        } else if (!row.sales_time.match(timeRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'sales_time';\n          result.errorReason = 'Not in correct format of HH:mm:ss';\n          reject(result);\n        }\n      }\n\n      if (!row.product_id) {\n        result.errorID = row.transaction_id;\n        result.errorField = 'product_id';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n\n        if (typeof row.product_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'product_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      }\n\n\n      if (!row.product_quantity) {\n        result.errorID = row.transaction_id;\n        result.errorField = 'product_quantity';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n\n        if (isNaN(row.product_quantity)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'product_id';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      }\n\n      if (!row.product_unit_price && row.product_unit_price !== 0) {\n        result.errorID = row.transaction_id;\n        result.errorField = 'product_unit_price';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n\n        if (isNaN(row.product_unit_price)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'product_unit_price';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      }\n\n      if (!row.sales_value && row.sales_value !== 0) {\n        result.errorID = row.transaction_id;\n        result.errorField = 'sales_value';\n        result.errorReason = 'Missing Required Property';\n        reject(result);\n      } else {\n\n        if (isNaN(row.sales_value)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'sales_value';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      }\n\n\n      if (row.sales_value_wo_vat) {\n        if (isNaN(row.sales_value_wo_vat)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'sales_value_wo_vat';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      } else {\n        row.sales_value_wo_vat = 0;\n      }\n\n      if (row.rebate) {\n        if (isNaN(row.rebate)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'rebate';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      } else {\n        row.rebate = 0;\n      }\n\n      if (row.rebate_wo_vat) {\n        if (isNaN(row.rebate_wo_vat)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'rebate_wo_vat';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      } else {\n        row.rebate_wo_vat = 0;\n      }\n\n\n      if (row.sales_currency) {\n        if (typeof row.sales_currency !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'sales_currency';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.sales_currency = '';\n      }\n\n      if (row.payment_method) {\n        if (typeof row.payment_method !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'payment_method';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.payment_method = '';\n      }\n\n\n      if (row.supplier_id) {\n        if (typeof row.supplier_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'supplier_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.supplier_id = '';\n      }\n\n\n      if (row.purchase_price) {\n        if (isNaN(row.purchase_price)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'purchase_price';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      } else {\n        row.purchase_price = 0;\n      }\n\n\n      if (row.purchase_price_wo_vat) {\n        if (isNaN(row.purchase_price_wo_vat)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'purchase_price_wo_vat';\n          result.errorReason = 'Not a Number!';\n          reject(result);\n        }\n      } else {\n        row.purchase_price_wo_vat = 0;\n      }\n\n      if (row.purchase_currency) {\n        if (typeof row.purchase_currency !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'purchase_currency';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.purchase_currency = '';\n      }\n\n      if (row.piece_good) {\n        if (typeof row.piece_good !== 'boolean') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'purchase_currency';\n          result.errorReason = 'Not a Boolean';\n          reject(result);\n        }\n      } else {\n        row.purchase_currency = false;\n      }\n\n      if (row.organisation_id) {\n        if (typeof row.organisation_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'organisation_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.organisation_id = '';\n      }\n\n\n      if (row.department_id) {\n        if (typeof row.department_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'department_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.department_id = '';\n      }\n\n      if (row.salesperson_id) {\n        if (typeof row.salesperson_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'salesperson_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.salesperson_id = '';\n      }\n\n\n      if (row.campaign_id) {\n        if (typeof row.campaign_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'campaign_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.campaign_id = '';\n      }\n\n\n      if (row.cancel_id) {\n        if (typeof row.cancel_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'cancel_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.cancel_id = '';\n      }\n\n\n      if (row.delivery_date) {\n        if (!row.delivery_date.match(dateRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'delivery_date';\n          result.errorReason = 'Not in correct format of YYYY-mm-dd';\n          reject(result);\n        }\n      } else {\n        result.errorID = row.transaction_id;\n        result.errorField = 'delivery_date';\n        result.errorReason = 'Requires a Date';\n        reject(result);\n      }\n\n      if (row.delivery_time) {\n        if (!row.delivery_time.match(timeRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'delivery_time';\n          result.errorReason = 'Not in correct format of HH:mm:ss';\n          reject(result);\n        }\n      } else {\n        result.errorID = row.transaction_id;\n        result.errorField = 'delivery_time';\n        result.errorReason = 'Requires a Time';\n        reject(result);\n      }\n\n\n      if (row.order_date) {\n        if (!row.order_date.match(dateRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'order_date';\n          result.errorReason = 'Not in correct format of YYYY-mm-dd';\n          reject(result);\n        }\n      } else {\n        result.errorID = row.transaction_id;\n        result.errorField = 'order_date';\n        result.errorReason = 'Requires a Date';\n        reject(result);\n      }\n\n      if (row.order_time) {\n        if (!row.order_time.match(timeRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'order_time';\n          result.errorReason = 'Not in correct format of HH:mm:ss';\n          reject(result);\n        }\n      } else {\n        result.errorID = row.transaction_id;\n        result.errorField = 'order_time';\n        result.errorReason = 'Requires a Time';\n        reject(result);\n      }\n\n      if (row.invoice_date) {\n        if (!row.invoice_date.match(dateRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'invoice_date';\n          result.errorReason = 'Not in correct format of YYYY-mm-dd';\n          reject(result);\n        }\n      } else {\n        result.errorID = row.transaction_id;\n        result.errorField = 'invoice_date';\n        result.errorReason = 'Requires a Date';\n        reject(result);\n      }\n\n      if (row.invoice_time) {\n        if (!row.invoice_time.match(timeRegex)) {\n          result.errorID = row.transaction_id;\n          result.errorField = 'invoice_time';\n          result.errorReason = 'Not in correct format of HH:mm:ss';\n          reject(result);\n        }\n      } else {\n        result.errorID = row.invoice_time;\n        result.errorField = 'order_time';\n        result.errorReason = 'Requires a Time';\n        reject(result);\n      }\n\n\n      if (row.register_id) {\n        if (typeof row.register_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'register_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.register_id = '';\n      }\n\n\n      if (row.rebate_code_id) {\n        if (typeof row.rebate_code_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'rebate_code_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.rebate_code_id = '';\n      }\n\n\n      if (row.custom_field_1) {\n        if (typeof row.custom_field_1 !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'custom_field_1';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.custom_field_1 = '';\n      }\n\n      if (row.custom_field_2) {\n        if (typeof row.custom_field_2 !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'custom_field_2';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.custom_field_2 = '';\n      }\n      if (row.custom_field_3) {\n        if (typeof row.custom_field_3 !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'custom_field_3';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.custom_field_3 = '';\n      }\n      if (row.custom_field_4) {\n        if (typeof row.custom_field_4 !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'custom_field_4';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.custom_field_4 = '';\n      }\n      if (row.custom_field_5) {\n        if (typeof row.custom_field_5 !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'custom_field_1';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.custom_field_5 = '';\n      }\n\n\n      if (row.delivery_customer_id) {\n        if (typeof row.delivery_customer_id !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'delivery_customer_id';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.delivery_customer_id = '';\n      }\n\n\n      if (row.source_system) {\n        if (typeof row.source_system !== 'string') {\n          result.errorID = row.transaction_id;\n          result.errorField = 'source_system';\n          result.errorReason = 'Not a String';\n          reject(result);\n        }\n      } else {\n        row.source_system = '';\n      }\n\n      finalObject.push(row);\n      resolve(row);\n    });\n  });\n\n  return await Promise.all(request);\n\n\n};\n\nmodule.exports = {\n  validateSalesTransactions\n};\n"]}